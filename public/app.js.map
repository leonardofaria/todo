{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;;AAEA,SAAS,gBAAT,CAA0B,kBAA1B,EAA8C,YAAM;AAClD,MAAM,aAAa,SAAS,aAAT,CAAuB,eAAvB,CAAnB;AACA,MAAM,UAAU,SAAS,aAAT,CAAuB,WAAvB,CAAhB;AACA,MAAM,aAAa,SAAS,aAAT,CAAuB,cAAvB,CAAnB;;AAEA;AACA,MAAM,UAAU,OAAO,IAAP,CAAY,EAAE,SAAS,uBAAX,EAAZ,CAAhB;;AAEA,MAAM,aAAa,SAAb,UAAa,CAAC,IAAD,EAAU;AAC3B,QAAM,QAAQ,SAAS,aAAT,CAAuB,QAAvB,CAAd;;AAEA,QAAI,iDAA+C,KAAK,EAApD,yBAA0E,KAAK,KAA/E,UAAyF,KAAK,IAA9F,WAAJ;AACA;AACA,iDAA2C,KAAK,EAAhD;;AAEA,SAAK,KAAL,CAAW,GAAX,CAAe,UAAC,IAAD,EAAU;AACvB,iDAAyC,KAAK,EAA9C;AACA,6CAAqC,KAAK,EAA1C;AACA,4BAAoB,KAAK,IAAzB;AACA;AACD,KALD;;AAOA;AACA,uCAAiC,KAAK,EAAtC;AACA;AACA;;AAEA;AACA;;AAEA,QAAI,MAAM,SAAS,aAAT,CAAuB,KAAvB,CAAV;AACA,QAAI,SAAJ,GAAgB,OAAhB;AACA,QAAI,EAAJ,aAAiB,KAAK,EAAtB;AACA,QAAI,SAAJ,CAAc,GAAd,CAAkB,MAAlB;AACA;AACA,UAAM,WAAN,CAAkB,GAAlB;;AAEA,QAAI,YAAY,SAAS,aAAT,kBAAsC,KAAK,EAA3C,CAAhB;AACA,cAAU,gBAAV,CAA2B,OAA3B,EAAoC,UAAC,CAAD,EAAO;AACzC,UAAI,cAAc,EAAE,MAAF,CAAS,UAA3B;AACA,UAAI,QAAQ,EAAE,MAAF,CAAS,UAAT,CAAoB,UAApB,CAA+B,gBAA/B,CAAgD,OAAhD,CAAZ;;AAEA,UAAI,YAAY,SAAZ,CAAsB,QAAtB,CAA+B,QAA/B,CAAJ,EAA8C;AAC5C,oBAAY,SAAZ,CAAsB,MAAtB,CAA6B,QAA7B;;AAEA,cAAM,IAAN,CAAW,KAAX,EAAkB,OAAlB,CAA0B,UAAS,IAAT,EAAe;AACvC,eAAK,SAAL,CAAe,MAAf,CAAsB,UAAtB;AACD,SAFD;AAGD,OAND,MAMO;AACL,oBAAY,SAAZ,CAAsB,GAAtB,CAA0B,QAA1B;;AAEA,cAAM,IAAN,CAAW,KAAX,EAAkB,OAAlB,CAA0B,UAAS,IAAT,EAAe;AACvC,cAAI,YAAY,EAAZ,KAAmB,KAAK,EAA5B,EAAgC;AAC9B,iBAAK,SAAL,CAAe,GAAf,CAAmB,UAAnB;AACD;AACF,SAJD;AAKD;AACF,KAnBD;;AAqBA,QAAI,OAAO,SAAS,aAAT,CAAuB,MAAvB,CAAX;AACA,SAAK,SAAL;AACA,SAAK,SAAL,qDAAiE,KAAK,EAAtE;AACA,SAAK,SAAL;AACA,SAAK,EAAL,aAAkB,KAAK,EAAvB;AACA,SAAK,SAAL,CAAe,GAAf,CAAmB,UAAnB;;AAEA,QAAI,aAAa,SAAS,aAAT,iBAAqC,KAAK,EAA1C,CAAjB;AACA,eAAW,WAAX,CAAuB,IAAvB;AACA,SAAK,gBAAL,CAAsB,QAAtB,EAAgC,UAAC,CAAD,EAAO;AACrC,UAAM,OAAO,KAAK,aAAL,CAAmB,YAAnB,EAAiC,KAA9C;AACA,UAAM,SAAS,KAAK,aAAL,CAAmB,UAAnB,EAA+B,KAA9C;AACA,UAAM,SAAS,EAAE,MAAM,IAAR,EAAc,SAAS,MAAvB,EAAf;;AAEA,WAAK,KAAL;;AAEA,cAAQ,IAAR,CAAa,QAAb,EAAuB,MAAvB,EAA+B,IAA/B,CAAoC,UAAC,QAAD,EAAc;;AAEhD,YAAI,QAAQ,SAAS,aAAT,aAAiC,MAAjC,CAAZ;AACA,cAAM,SAAN,oCAAiD,SAAS,EAA1D,iCAAwF,SAAS,EAAjG,4CAA0I,SAAS,IAAnJ;;AAEA,YAAI,gBAAgB,SAAS,aAAT,uBAA2C,SAAS,EAApD,CAApB;AACA,sBAAc,gBAAd,CAA+B,OAA/B,EAAwC,UAAC,CAAD,EAAO;AAC7C,qBAAW,SAAS,EAApB;AACA,YAAE,cAAF;AACD,SAHD;AAKD,OAXD,EAWG,KAXH,CAWS,UAAC,QAAD,EAAc;;AAErB,YAAI,kBAAJ;AACA,iBAAS,OAAT,CAAiB,UAAU,KAAV,EAAiB;AAChC,6BAAiB,KAAjB;AACD,SAFD;;AAIA,eAAO,KAAP,CAAa,MAAb;AACD,OAnBD;;AAqBA,QAAE,cAAF;AACD,KA7BD;;AA+BA,SAAK,KAAL,CAAW,GAAX,CAAe,UAAC,IAAD,EAAU;AACvB,UAAI,gBAAgB,SAAS,aAAT,uBAA2C,KAAK,EAAhD,CAApB;AACA,oBAAc,gBAAd,CAA+B,OAA/B,EAAwC,UAAC,CAAD,EAAO;AAC7C,mBAAW,KAAK,EAAhB;AACA,UAAE,cAAF;AACD,OAHD;AAID,KAND;AAOD,GAlGD;;AAoGA,UAAQ,GAAR,CAAY,QAAZ,EAAsB,IAAtB,CAA2B,UAAC,QAAD,EAAc;AACvC,aAAS,GAAT,CAAa,UAAC,IAAD;AAAA,aAAU,WAAW,IAAX,CAAV;AAAA,KAAb;AACD,GAFD;;AAIA,aAAW,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;AACzC,QAAM,OAAO,SAAS,aAAT,CAAuB,YAAvB,EAAqC,KAAlD;AACA,QAAM,QAAQ,SAAS,aAAT,CAAuB,aAAvB,EAAsC,KAApD;AACA,QAAM,SAAS,EAAE,MAAM,IAAR,EAAc,OAAO,KAArB,EAAf;;AAEA,YAAQ,IAAR,CAAa,QAAb,EAAuB,MAAvB,EAA+B,IAA/B,CAAoC,UAAC,QAAD,EAAc;;AAEhD,iBAAW,QAAX;AACA,cAAQ,SAAR,CAAkB,MAAlB,CAAyB,QAAzB;AACA,eAAS,aAAT,CAAuB,YAAvB,EAAqC,KAArC,GAA6C,EAA7C;AAED,KAND,EAMG,KANH,CAMS,UAAC,QAAD,EAAc;;AAErB,UAAI,kBAAJ;AACA,eAAS,OAAT,CAAiB,UAAU,KAAV,EAAiB;AAChC,2BAAiB,KAAjB;AACD,OAFD;;AAIA,aAAO,KAAP,CAAa,MAAb;AACD,KAdD;;AAgBA,WAAO,KAAP;AACD,GAtBD;;AAwBA,MAAM,aAAa,SAAb,UAAa,CAAC,EAAD,EAAQ;AACzB,QAAI,OAAO,OAAP,CAAe,eAAf,CAAJ,EAAqC;AACnC,UAAI,OAAO,SAAS,aAAT,YAAgC,EAAhC,CAAX;AACA,WAAK,UAAL,CAAgB,WAAhB,CAA4B,IAA5B;AACA,cAAQ,MAAR,aAAyB,EAAzB;AACD;AACF,GAND;;AAQA,aAAW,gBAAX,CAA4B,OAA5B,EAAqC,YAAM;AACzC,YAAQ,SAAR,CAAkB,MAAlB,CAAyB,QAAzB;AACD,GAFD;AAID,CApJD","file":"app.js","sourcesContent":["'use strict';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const btnNewList = document.querySelector('.btn-new-list');\n  const newList = document.querySelector('.new-list');\n  const createList = document.querySelector('.create-list');\n\n  // const request = window.ajax({ baseUrl: 'https://todo-sinatra-app.herokuapp.com' });\n  const request = window.ajax({ baseUrl: 'http://127.0.0.1:9393' });\n\n  const renderList = (list) => {\n    const lists = document.querySelector('.lists');\n\n    let content = `<div class=\"title\" id=\"list-title-${list.id}\" style=\"color: #${list.color}\">${list.name}</div>`;\n    content += `<div class=\"content\">`;\n    content += `<div class=\"tasks\" id=\"tasks-${list.id}\">`;\n\n    list.tasks.map((task) => {\n      content += `<div class=\"task\" id=\"task-${task.id}\">`;\n      content += `<a id=\"btn-delete-task-${task.id}\" class=\"btn-delete-task\"></a>`;\n      content += `<span>${task.name}</span>`;\n      content += `</div>`;\n    });\n\n    content += `</div>`;\n    content += `<div id=\"list-form-${list.id}\" class=\"form\">`;\n    content += `<a class=\"btn btn-add-task\">+</a>`;\n    content += `</div>`;\n\n    content += `</div>`;\n    content += `</div>`;\n\n    let div = document.createElement('div');\n    div.innerHTML = content;\n    div.id = `list-${list.id}`;\n    div.classList.add('list');\n    // div.style = `box-shadow: 0px 6px 23px -3px #${list.color}, 0px -6px 23px -3px #${list.color}`;\n    lists.appendChild(div);\n\n    let listTitle = document.querySelector(`#list-title-${list.id}`);\n    listTitle.addEventListener('click', (e) => {\n      let currentList = e.target.parentNode;\n      let lists = e.target.parentNode.parentNode.querySelectorAll('.list');\n\n      if (currentList.classList.contains('active')) {\n        currentList.classList.remove('active');\n\n        Array.from(lists).forEach(function(list) {\n          list.classList.remove('inactive');\n        });\n      } else {\n        currentList.classList.add('active');\n\n        Array.from(lists).forEach(function(list) {\n          if (currentList.id !== list.id) {\n            list.classList.add('inactive');\n          }\n        });\n      }\n    });\n\n    let form = document.createElement('form');\n    form.innerHTML = `<input type=\"text\" class=\"task-name\">`;\n    form.innerHTML += `<input type=\"hidden\" class=\"list-id\" value=\"${list.id}\">`;\n    form.innerHTML += `<input type=\"submit\" class=\"hidden\" />`;\n    form.id = `list-${list.id}`;\n    form.classList.add('new-task');\n\n    let formHolder = document.querySelector(`#list-form-${list.id}`);\n    formHolder.appendChild(form);\n    form.addEventListener('submit', (e) => {\n      const name = form.querySelector('.task-name').value;\n      const listId = form.querySelector('.list-id').value;\n      const params = { name: name, list_id: listId };\n\n      form.reset();\n\n      request.post('/tasks', params).then((response) => {\n\n        let tasks = document.querySelector(`#tasks-${listId}`);\n        tasks.innerHTML += `<div class=\"task\" id=\"task-${response.id}\"><a id=\"btn-delete-task-${response.id}\" class=\"btn-delete-task\"></a><span>${response.name}</span></div>`;\n\n        let btnDeleteTask = document.querySelector(`#btn-delete-task-${response.id}`);\n        btnDeleteTask.addEventListener('click', (e) => {\n          deleteTask(response.id);\n          e.preventDefault();\n        });\n\n      }).catch((response) => {\n\n        let errors = `Ops: \\n`;\n        response.forEach(function (error) {\n          errors += `\\n- ${error}`;\n        });\n\n        window.alert(errors);\n      });\n\n      e.preventDefault();\n    });\n\n    list.tasks.map((task) => {\n      let btnDeleteTask = document.querySelector(`#btn-delete-task-${task.id}`);\n      btnDeleteTask.addEventListener('click', (e) => {\n        deleteTask(task.id);\n        e.preventDefault();\n      });\n    });\n  };\n\n  request.get('/lists').then((response) => {\n    response.map((list) => renderList(list));\n  });\n\n  createList.addEventListener('click', () => {\n    const name = document.querySelector('.list-name').value;\n    const color = document.querySelector('.list-color').value;\n    const params = { name: name, color: color };\n\n    request.post('/lists', params).then((response) => {\n\n      renderList(response);\n      newList.classList.toggle('active');\n      document.querySelector('.list-name').value = '';\n\n    }).catch((response) => {\n\n      let errors = `Ops: \\n`;\n      response.forEach(function (error) {\n        errors += `\\n- ${error}`;\n      });\n\n      window.alert(errors);\n    });\n\n    return false;\n  });\n\n  const deleteTask = (id) => {\n    if (window.confirm('Are you sure?')) {\n      let task = document.querySelector(`#task-${id}`);\n      task.parentNode.removeChild(task);\n      request.delete(`/tasks/${id}`);\n    }\n  };\n\n  btnNewList.addEventListener('click', () => {\n    newList.classList.toggle('active');\n  });\n\n});\n"],"sourceRoot":"/source/"}